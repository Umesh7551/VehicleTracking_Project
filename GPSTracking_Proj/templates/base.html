<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %} {% endblock title %}</title>
    <meta name="description"
          content="EminentGPSTracking.com is your authoritative and affordable source for GPS Trackers. We provide private industry, small businesses, and government agencies with Live GPS Tracking Systems which track vehicles and payloads in Real Time.">
    <meta name="keywords"
          content="GPSTracking, GPS Tracking, GPS Tracker, GPS Trackers, GPS, fleet tracking, vehicle tracking, vehicle gps, car tracking, gps system, car gps, fleet gps, gps tracking system, gps vehicle tracking, mobile location unit, gps tracking device, gps tracking equipment, gps vehicle tracking system, constant monitoring, automobile and theft recovery, location system, gps vehicle tracking system, fleet management, Teen Tracking, live tracking, realtime gps">
    <meta name="robots" content="index, follow"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}"/>
    <!-- Bootstrap CSS CDN starts here -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <!-- Bootstrap CSS CDN ends here -->

    <!-- Font Awesome CSS file-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
          integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/fontawesome.css"
          integrity="sha512-36F832l13IegJ8Meeg8hlzXU83GBt0Z8oEsh/6rDen/+c13KMnaCnvwEh+h6S3/xz99NTAwusodPl4OMYG5cQQ=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <!-- Custom CSS-->
    <link href="{% static 'css/custom.css' %}" rel="stylesheet" type="text/css"/>
<!--    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">-->
    <!-- <link rel="stylesheet" type="text/css" href="/assets/bootstrap/bootstrap.min.css.map"> -->
    <link rel="stylesheet" type="text/css" href="{% static 'assets/css/datatables.min.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <link rel="stylesheet" type="text/css" href="{% static 'assets/css/style.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/style_backend.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'assest_old/fontawesome/css/all.min.css' %}" type="text/css">


</head>
<body class="container-fluid">

<div class="row">

    <div class="right_page_block">
        {% block content %}

        {% endblock %}
    </div>
</div>


<!-- Bootstrap JS CDN starts here-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
<!-- Bootstrap JS CDN ends here-->
<!--JQuery JS-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>-->
<!-- Custom JS-->
<script type="javascript" src="{% static 'js/script.js' %}"></script>
    <!--<script type="text/javascript" src="assets/js/bootstrap.bundle.min.js"></script>-->

<!--<script type="text/javascript" src="assets/js/jquery-3.6.0.min.js"></script>-->
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
<script type="text/javascript" src="{% static 'assets/js/jquery.dataTables.min.js' %}"></script>
<!--<script type="text/javascript" src="assets/js/jquery.dataTables.min.js"></script>-->
<script type="text/javascript" src="{% static 'assets/js/script.js' %}"></script>
<script  type="text/javascript" src="{% static 'assets/js/main.js' %}"></script>
<!-- Google Map API Add this script tag in the head section -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB_QSTUlqPA9Gr3XH6AQKRfbouVqM97KTc&libraries=places"></script>
<!--Javascript code to refresh data block for every 5 seconds -->
<!--<script>-->
<!--    // Function to refresh the dashboard content-->
<!--    function refreshDashboard() {-->
<!--      // Use jQuery to load the updated content via AJAX-->
<!--      $('#dashboard-content').load('/dashboard/');-->
<!--    }-->

<!--    // Set an interval to refresh the dashboard every 5 seconds (5000 milliseconds)-->
<!--    setInterval(refreshDashboard, 5000);-->
<!--  </script>-->

<!--JavaScripts confirmation script to handle the delete confirmation-->
<!-- Add this script at the end of your template -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var deleteLinks = document.querySelectorAll('.delete-link');

        deleteLinks.forEach(function (link) {
            link.addEventListener('click', function (event) {
                event.preventDefault();

                var driverId = link.getAttribute('data-driver-id');
                var confirmation = confirm('Are you sure you want to delete this driver?');

                if (confirmation) {
                    window.location.href = '{% url "delete_driver" 0 %}'.replace('0', driverId);
                }
            });
        });
    });
</script>

<!-- Update the existing script at the end of your template -->
<!--<script>-->
<!--    function locateOnMap(latitude, longitude) {-->
<!--        var defaultCarImage = document.querySelector('[data-default-car-image]').getAttribute('data-default-car-image');-->

<!--        var mapOptions = {-->
<!--            center: new google.maps.LatLng(parseFloat(latitude), parseFloat(longitude)),-->
<!--            zoom: 15,-->

<!--        };-->

<!--        var map = new google.maps.Map(document.getElementById('map'), mapOptions);-->

<!--        var marker = new google.maps.Marker({-->
<!--            position: new google.maps.LatLng(parseFloat(latitude), parseFloat(longitude)),-->
<!--            map: map,-->
<!--            title: 'Tracker Location',-->

<!--        });-->

<!--        var infowindowContent = '<div>' +-->
<!--            '<p>Tracker Location: Latitude ' + latitude + ', Longitude ' + longitude + '</p>' +-->
<!--            '<img src="' + defaultCarImage + '" alt="Car Image">' +-->
<!--            '</div>';-->

<!--        var infowindow = new google.maps.InfoWindow({-->
<!--            content: infowindowContent,-->
<!--        });-->

<!--        marker.addListener('click', function () {-->
<!--            infowindow.open(map, marker);-->
<!--        });-->
<!--    }-->
<!--</script>-->

<script>
    function locateOnMap(latitude, longitude) {
        var defaultCarImage = document.querySelector('[data-default-car-image]').getAttribute('data-default-car-image');

        var mapOptions = {
            center: new google.maps.LatLng(parseFloat(latitude), parseFloat(longitude)),
            zoom: 15,
        };

        var map = new google.maps.Map(document.getElementById('map'), mapOptions);


        // Create a custom overlay for the car image
        var carImage = new google.maps.OverlayView();
        carImage.onAdd = function () {
            var div = document.createElement('div');
            div.style.position = 'absolute';
            div.innerHTML = '<img src="' + defaultCarImage + '" alt="Car Image" style="width: 32px; height: 32px;">';
            this.getPanes().overlayLayer.appendChild(div);
            this.div = div;
        };

        carImage.draw = function () {
            var overlayProjection = this.getProjection();
            var position = overlayProjection.fromLatLngToDivPixel(new google.maps.LatLng(parseFloat(latitude), parseFloat(longitude)));

            this.div.style.left = position.x - 30 + 'px'; // Adjust the positioning based on the image size
            this.div.style.top = position.y - 20 + 'px';
        };

        carImage.setMap(map);

        var infowindowContent = '<div>' +
            '<p>Tracker Location: Latitude ' + latitude + ', Longitude ' + longitude + '</p>' +
            '<img src="' + defaultCarImage + '" alt="Car Image">' +
            '</div>';

        var infowindow = new google.maps.InfoWindow({
            content: infowindowContent,
        });

        // Open infowindow when car image is clicked
        google.maps.event.addDomListener(carImage.div, 'click', function () {
            infowindow.open(map);
        });
    }
</script>
</body>
</html>